$(document).ready(function(){if(tinyLayer.initModule(".swatch, .flag-icon .flag-item"),!document.querySelector(".js-model-switcher"))return!1;var n={el:document.querySelectorAll(".js-model-switcher"),currentEl:null,formId:"sendSiblingModelForm",subModelId:"subModelId",itemSelector:".js-model",$items:null,ajaxUrl:null,paramName:null,bizType:"B2C",init:function(){0<$(".navigation").length&&$(".navigation").hasClass("b2b")&&(this.bizType="B2B");for(var e=0;e<n.el.length;e++)n.currentEl=n.el[e],n.$items=$(n.currentEl).find(n.itemSelector),n.ajaxUrl=n.currentEl.getAttribute("data-model-url"),n.paramName=n.currentEl.getAttribute("data-name"),n.addEvent()},numberWithCommas:function(e){if(0==e)return 0;if(e=parseFloat(e),isNaN(e))return 0;for(var a=/(^[+-]?\d+)(\d{3})/,t=e+"";a.test(t);)t=t.replace(a,"$1,$2");return t},decimalNumber:function(e){return e||(e="00"),e},addEvent:function(){$(n.currentEl).on({click:function(l){l.preventDefault();var e=-1<l.currentTarget.getAttribute("href").indexOf("#")?l.currentTarget.getAttribute("data-href"):l.currentTarget.getAttribute("href"),o=$(l.currentTarget).index();methodType=$(n.currentEl).data("ajaxMethod"),param={},ajaxUrl=$(l.currentTarget).closest(".js-model-switcher").attr("data-model-url"),param[n.paramName]=e,param.bizType=n.bizType,0<$(".search-contents-area").length&&(0<$(l.currentTarget).closest(".business-product-list").length?param.bizType="B2B":param.bizType="B2C"),0<$(l.currentTarget).closest(".C0007").length&&(param.categoryId=$(l.currentTarget).closest(".C0007").find("form input[name=categoryId]").val()),ajax.call(ajaxUrl,param,"json",function(e){if(e&&""!=e){var a=$(l.currentTarget).closest(n.itemSelector);if("success"==e.status){var t=e.data[0];a.find(".tag-content").empty(),null!=t.productTag1&&""!=t.productTag1&&a.find(".tag-content").append("<span>"+t.productTag1+"</span>"),null!=t.productTag2&&""!=t.productTag2&&a.find(".tag-content").append("<span>"+t.productTag2+"</span>"),a.find("a.visual").attr("href",t.modelUrlPath),null!=t.imageAltText&&""!=t.imageAltText?a.find("a.visual img").attr("alt",t.imageAltText):a.find("a.visual img").attr("alt",""),bindImgError(),a.find("a.visual img").attr("aria-hidden","true"),a.find("a.visual img.pc").attr("src",t.mediumImageAddr).attr("data-src",t.mediumImageAddr),a.find("a.visual img.mobile").attr("src",t.smallImageAddr).attr("data-src",t.smallImageAddr),null!=t.modelRollingImgList&&""!=t.modelRollingImgList?a.find("a.visual img.pc").addClass("js-thumbnail-loop").attr("data-img-list",t.modelRollingImgList):a.find("a.visual img.pc").removeClass("js-thumbnail-loop").removeAttr("data-img-list"),a.find(".thumbnail-carousel").remove(),thumbnailLoop&&thumbnailLoop.mobileThumbnailCarouselSingle(a.find("a.visual img[data-img-list]").eq(0),!0),a.find(".model-group a").removeClass("active").attr("aria-checked",!1).eq(o).addClass("active").attr("aria-checked",!0),a.find(".products-info .model-name a").attr("href",t.modelUrlPath).html(t.userFriendlyName),null==t.modelUrlPath&&(a.find("a.visual").removeAttr("href"),a.find(".products-info .model-name a").removeAttr("href")),null==t.userFriendlyName&&a.find(".products-info .model-name a").html(t.userFriendlyName),a.find(".products-info .sku").html(t.modelName),a.find(".ecorebates-div").attr("data-modelId",t.modelId),"B2C"==n.bizType&&t.target&&"NEW"==t.target.toUpperCase()&&a.find(".rating").replaceWith('<div class="rating" data-bv-show="inline_rating" data-bv-product-id="'+t.modelId+'" data-bv-redirect-url="'+t.modelUrlPath+'#pdp_review"></div>');var r="$",i="Save ";if(a.find(".price-area").empty(),"DISCONTINUED"==t.modelStatusCode||("Y"==t.obsCondition?null!=t.rPromoPrice&&""!=t.rPromoPrice&&null!=t.rPromoPriceCent&&""!=t.rPromoPriceCent&&null!=t.discountedRate&&""!=t.discountedRate&&null!=t.rDiscountedPrice&&""!=t.rDiscountedPrice&&null!=t.rDiscountedPriceCent&&""!=t.rDiscountedPriceCent&&null!=t.rPrice&&""!=t.rPrice?a.find(".price-area").append('<div class="purchase-price"><div class="price">$'+n.numberWithCommas(t.rPromoPrice)+"."+t.rPromoPriceCent+'</div></div><div class="product-price"><div class="price">'+r+n.numberWithCommas(t.rPrice)+"."+n.decimalNumber(t.rPriceCent)+'</div><div class="legal">'+i+" "+r+n.numberWithCommas(t.rDiscountedPrice)+"."+n.decimalNumber(t.rDiscountedPriceCent)+"</div></div>"):"B2C"==n.bizType&&null!=t.rPrice&&""!=t.rPrice&&a.find(".price-area").append('<div class="purchase-price"><div class="price">$'+n.numberWithCommas(t.rPrice)+"."+n.decimalNumber(t.rPriceCent)+"</div></div>"):"Y"==t.retailerPricingFlag?a.find(".price-area").append('<div class="retailer">'+t.retailerPricingText+"</div>"):null!=t.rPromoPrice&&""!=t.rPromoPrice&&null!=t.rPromoPriceCent&&""!=t.rPromoPriceCent&&null!=t.discountedRate&&""!=t.discountedRate&&null!=t.rDiscountedPrice&&""!=t.rDiscountedPrice&&null!=t.rDiscountedPriceCent&&""!=t.rDiscountedPriceCent&&null!=t.rPrice&&""!=t.rPrice?a.find(".price-area").append('<div class="purchase-price"><div class="price">$'+n.numberWithCommas(t.rPromoPrice)+"."+t.rPromoPriceCent+'</div></div><div class="product-price"><div class="price">'+r+n.numberWithCommas(t.rPrice)+"."+n.decimalNumber(t.rPriceCent)+'</div><div class="legal">'+i+" "+r+n.numberWithCommas(t.rDiscountedPrice)+"."+n.decimalNumber(t.rDiscountedPriceCent)+"</div></div>"):"B2B"==n.bizType&&null!=t.rPrice&&""!=t.rPrice?a.find(".price-area").append('<div class="msrp">msrp</div><div class="purchase-price"><div class="price">$'+n.numberWithCommas(t.rPrice)+"."+n.decimalNumber(t.rPriceCent)+"</div></div>"):"B2C"==n.bizType&&null!=t.rPrice&&""!=t.rPrice&&a.find(".price-area").append('<div class="purchase-price"><div class="price">$'+n.numberWithCommas(t.rPrice)+"."+n.decimalNumber(t.rPriceCent)+"</div></div>")),null!=t.promotionText&&""!=t.promotionText?a.find(".promotion-text").html(t.promotionText):a.find(".promotion-text").html(""),"Y"==t.addToCartFlag?a.find(".button a.add-to-cart").addClass("active").data("model-id",t.modelId):a.find(".button a.add-to-cart").removeClass("active"),"Y"==t.whereToBuyFlag&&null!=t.whereToBuyUrl&&""!=t.whereToBuyUrl?a.find(".button a.where-to-buy").addClass("active").attr("href",t.whereToBuyUrl):"Y"==t.wtbExternalLinkUseFlag&&t.wtbExternalLinkUrl&&t.wtbExternalLinkName?a.find(".button a.where-to-buy").addClass("active").attr("href",t.wtbExternalLinkUrl).text(t.wtbExternalLinkName):a.find(".button a.where-to-buy").removeClass("active"),"Y"==t.findTheDealerFlag&&null!=t.findTheDealerUrl&&""!=t.findTheDealerUrl?a.find(".button a.find-a-dealer").addClass("active").attr("href",t.findTheDealerUrl):a.find(".button a.find-a-dealer").removeClass("active"),"Y"==t.inquiryToBuyFlag&&null!=t.inquiryToBuyUrl&&""!=t.inquiryToBuyUrl?a.find(".button a.inquiry-to-buy").addClass("active").attr("href",t.inquiryToBuyUrl):a.find(".button a.inquiry-to-buy").removeClass("active"),a.find(".wishlist-compare .js-compare").attr("data-model-id",t.modelId),null!=getCookie(compareCookie.name)?(t.modelId,-1!=getCookie(compareCookie.name).indexOf(t.modelId)?a.find(".wishlist-compare .js-compare").addClass("added").prop("checked",!0):a.find(".wishlist-compare .js-compare").removeClass("added").prop("checked",!1)):a.find(".wishlist-compare .js-compare").removeClass("added").prop("checked",!1),t.target&&"SELF"==t.target.toUpperCase()?a.addClass("self"):a.removeClass("self"),null!=t.modelName&&""!=t.modelName&&"undefined"!=t.modelName?(a.find("a.visual").data("adobe-modelname",t.modelName),a.find(".ga-model-info").data("ga-modelname",t.modelName),a.find(".ga-model-info").attr("data-ga-modelname",t.modelName)):(a.find("a.visual").data("adobe-modelname",""),a.find(".ga-model-info").data("ga-modelname",""),a.find(".ga-model-info").attr("data-ga-modelname","")),null!=t.salesModelCode&&""!=t.salesModelCode&&"undefined"!=t.salesModelCode?(a.find("a.visual").data("adobe-salesmodelcode",t.salesModelCode),a.find(".ga-model-info").data("ga-salesmodelcode",t.salesModelCode),a.find(".ga-model-info").attr("data-ga-salesmodelcode",t.salesModelCode)):(a.find("a.visual").data("adobe-salesmodelcode",""),a.find(".ga-model-info").data("ga-salesmodelcode",""),a.find(".ga-model-info").attr("data-ga-salesmodelcode","")),null!=t.buName1&&""!=t.buName1&&"undefined"!=t.buName1?(a.find(".ga-model-info").data("bu-name",t.buName1),a.find(".ga-model-info").attr("data-bu-name",t.buName1)):(a.find(".ga-model-info").data("bu-name",""),a.find(".ga-model-info").attr("data-bu-name","")),0<a.find(".rebate-box").length&&(a.find(".rebate-box").empty().html('<div class="product-rebate"><div class="ecorebates-div" data-modelId="'+t.modelId+'"></div></div>'),$.isFunction(runEcorebates)&&runEcorebates()),0<$(".compare-wrap").length&&0<$(".compare-sticky").length){a.find(".button").attr("data-model-id",t.modelId);var d=getCookie(compareCookie.name);d&&""!=d?-1==d.indexOf(t.modelId)?(a.find(".button a").eq(0).removeClass("active"),a.find(".button a").eq(1).addClass("active")):(a.find(".button a").eq(0).addClass("active"),a.find(".button a").eq(1).removeClass("active")):(a.find(".button a").eq(0).removeClass("active"),a.find(".button a").eq(1).addClass("active"))}}}},methodType)}},n.itemSelector+" .model-group a");var e=[n.itemSelector+".self .model-name a",n.itemSelector+".self a.visual",n.itemSelector+".self a.btn.where-to-buy"];$(n.currentEl).on({click:function(e){e.preventDefault();var a=document.getElementById(n.formId),t="#"!=$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("href")?$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("href"):$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("data-href");a||($("body").append("<form action='' id='"+n.formId+"' method='post'><input type='hidden' name='"+n.subModelId+"'></form>"),a=document.getElementById(n.formId)),a.action=e.currentTarget.href,a[n.subModelId].value=t,e.ctrlKey||e.metaKey||e.shiftKey?a.target="_blank":a.target="_self",a.submit()}},e.join(",")),$(".js-model-switcher").on("click",".js-model.self .rating a.bv_main_container",function(e){e.preventDefault();var a=document.getElementById(n.formId),t="#"!=$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("href")?$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("href"):$(e.currentTarget).closest(n.itemSelector).find(".model-group .active").attr("data-href");a||($("body").append("<form action='' id='"+n.formId+"' method='post'><input type='hidden' name='"+n.subModelId+"'></form>"),a=document.getElementById(n.formId)),a.action=e.currentTarget.href,a[n.subModelId].value=t,e.ctrlKey||e.metaKey||e.shiftKey?a.target="_blank":a.target="_self",a.submit()})}};n.init()});
//# sourceMappingURL=maps/model-switcher.min.js.map
