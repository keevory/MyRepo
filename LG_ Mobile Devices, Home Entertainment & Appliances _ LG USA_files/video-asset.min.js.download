var video;$(document).ready(function(){var r,e,v="",l="",s="",n="";(e=document.createElement("script")).src="https://www.youtube.com/iframe_api",$("body").append(e),(video={originalFocus:null,cache:{$modal:null,id:null},markup:{modal:['<div class="video-modal video-box-closeset youtube"><div class="modal-video-asset"><div class="video-asset">','<div class="video-modal video-box-closeset brightcove"><div class="modal-video-asset"><div class="video-asset">','</div></div><button class="close-video">Close Video</button>',"</div>",'<button class="acc-change-video">Play a audio description video</button>','<button class="change-video">Play a non-audio description video</button>'],current:['<div class="video-asset video-box-closeset">','<button class="close-video">Close Video</button>',"</div>",'<button class="acc-change-video">Play a audio description video</button>','<button class="change-video">Play a non-audio description video</button>']},getTitle:function(e,t){var a="";return a="youtube"==e?t.getVideoData().title:t.mediainfo.name,changeTitleFormat(a)},trigger:{init:function(){video.trigger.addEvent()},setYoutube:function(e){"video"==$(e).data("video-content")?(s=$(e).siblings(".see-video").data("link-area"),n=$(e).siblings(".see-video").data("link-name")):"acc-video"==$(e).data("video-content")&&(v=$(e).siblings(".see-video").data("link-area"),l=$(e).siblings(".see-video").data("link-name"));var t,a=xssfilter(e.getAttribute("data-src")),i=null;if(0<a.indexOf("/")){var o=a.split("/");a=o[o.length-1]}e.getAttribute("data-target");t='<div id="videoPlayerCode"></div>',"modal"==e.getAttribute("data-target")?(i=video.markup.modal[0]+t+video.markup.modal[2],"video"==$(e).data("video-content")?i+=video.markup.modal[4]:"acc-video"==$(e).data("video-content")&&(i+=video.markup.modal[5]),i+=video.markup.modal[3],video.appendModal("youtube",i,a)):(i=video.markup.current[0]+t+video.markup.current[1],"video"==$(e).data("video-content")?i+=video.markup.current[3]:"acc-video"==$(e).data("video-content")&&(i+=video.markup.current[4]),i+=video.markup.current[2],video.appendCurrent("youtube",i,a,"","",e)),this.playVideoYoutube(a)},setBrightcove:function(e){"video"==$(e).data("video-content")?(s=$(e).siblings(".see-video").data("link-area"),n=$(e).siblings(".see-video").data("link-name")):"acc-video"==$(e).data("video-content")&&(v=$(e).siblings(".see-video").data("link-area"),l=$(e).siblings(".see-video").data("link-name"));var t,a=xssfilter(e.getAttribute("data-video-id")),i=xssfilter(e.getAttribute("data-account")),o=xssfilter(e.getAttribute("data-player")),d=null;t='<div id="videoPlayerCode"></div>',"modal"==e.getAttribute("data-target")?(d=video.markup.modal[1]+t+video.markup.modal[2],"video"==$(e).data("video-content")?d+=video.markup.modal[4]:"acc-video"==$(e).data("video-content")&&(d+=video.markup.modal[5]),d+=video.markup.modal[3],video.appendModal("brightcove",d,a)):(d=video.markup.current[0]+t+video.markup.current[1],"video"==$(e).data("video-content")?d+=video.markup.current[3]:"acc-video"==$(e).data("video-content")&&(d+=video.markup.current[4]),d+=video.markup.current[2],video.appendCurrent("brightcove",d,a,i,o,e)),this.playVideoBrightCove(i,o,a)},playVideoYoutube:function(e){0<=e.indexOf("?")&&(e=e.split("?")[0]),setTimeout(function(){var o=new YT.Player("videoPlayerCode",{height:"360",width:"640",videoId:e,host:"https://www.youtube.com",playerVars:{modestbranding:!0,rel:0},events:{onReady:function(e){e.target.playVideo()},onStateChange:function(e){e.data==YT.PlayerState.PLAYING&&adobeSatellite("video_track",{name:video.getTitle("youtube",o),event:"play"});e.data==YT.PlayerState.PAUSED&&adobeSatellite("video_track",{name:video.getTitle("youtube",o),event:"pause"})}}});var d=[0,0,0,0];r=setInterval(function(){if("function"!=typeof o.getDuration)return!1;for(var e=o.getDuration(),t=o.getCurrentTime(),a=parseInt(100*t/e),i=1;i<=4;i++)25*i<=a&&0==d[i-1]&&(d[i-1]=1,adobeSatellite("video_track",{name:video.getTitle("youtube",o),event:"ratio_"+25*i}));99<=a&&0==d[3]&&(d[3]=1,adobeSatellite("video_track",{name:video.getTitle("youtube",o),event:"ratio_100"}))},2e3),$(".change-video").attr("data-link-area",v),$(".change-video").attr("data-link-name",l),$(".acc-change-video").attr("data-link-area",s),$(".acc-change-video").attr("data-link-name",n)},1e3)},playVideoBrightCove:function(e,t,a){var d,i,n=e,c=t;i='<video-js id="brightCovePlayer" data-video-id="'+a+'"  data-account="'+n+'" data-player="'+c+'" data-embed="default" data-application-id autoplay class="video-js" controls></video-js>',setTimeout(function(){document.getElementById("videoPlayerCode").innerHTML=i;var e=document.createElement("script");e.src="https://players.brightcove.net/"+n+"/"+c+"_default/index.min.js",document.body.appendChild(e),e.onload=function(){(d=bc(document.getElementById("brightCovePlayer"))).on("loadedmetadata",function(){d.muted(!1),d.play()}),d.on("pause",function(){adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"pause"})}),d.on("play",function(){adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"play"})})};var o=[0,0,0,0];r=setInterval(function(){for(var e=d.mediainfo.duration,t=d.currentTime(),a=parseInt(100*t/e),i=1;i<=4;i++)25*i<=a&&0==o[i-1]&&(o[i-1]=1,adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"ratio_"+25*i}));99<=a&&0==o[3]&&(o[3]=1,adobeSatellite("video_track",{name:video.getTitle("brightcove",d),event:"ratio_100"}))},2e3),$(".change-video").attr("data-link-area",v),$(".change-video").attr("data-link-name",l),$(".acc-change-video").attr("data-link-area",s),$(".acc-change-video").attr("data-link-name",s)},1e3)},addEvent:function(){var v=video.trigger,e=$(".component");e.length<=0&&(e=$(".container-fluid")),e.off("click.video").on({"click.video":function(e){if(e.preventDefault(),0<$("#videoPlayerCode").length){var t=$("#videoPlayerCode");0<t.closest(".video-modal").length?t.closest(".video-modal").find("button.close-video").trigger("click"):$("#videoPlayerCode").siblings("button.close-video").trigger("click")}var a=e.currentTarget,i=!0;if(video.originalFocus=$(a),"modal"!=a.getAttribute("data-target")){var o=$(a).data("cachedvideo"),d=$(a).data("cacheid"),n=$(a).data("cacheaccount"),c=$(a).data("cacheplayer");i=!o||(video.appendCurrent(a.getAttribute("data-type"),o,d,n,c,a,!0),"youtube"==a.getAttribute("data-type")?video.trigger.playVideoYoutube(d):video.trigger.playVideoBrightCove(n,c,d),!1)}i&&"youtube"==a.getAttribute("data-type")?v.setYoutube(a):i&&"brightcove"==a.getAttribute("data-type")&&v.setBrightcove(a);var r=$(a).closest(".slick-initialized");0<r.length&&r.next().find("a.slide-pause.pause").trigger("click")}},".see-video")}},appendCurrent:function(e,t,a,i,o,d,n){var c=t,r=$(d).parents(".video-box"),v=(r=r.get(0)?r:$(d).parents(".video-box").find(".visual-area")).find(".video-asset"),l=$(d).parents(".carousel-box").find(".text-area");v&&v.remove(),l.animate({opacity:0},500),r.parents(".component").addClass("js-invisible-nav"),setTimeout(function(){l.css({zIndex:-1}),r.append(c),n||video.initCompo(d,a,i,o)},500)},appendModal:function(e,t,a){var i=document.querySelectorAll(".video-modal")[0],o=t;i&&$(i).remove(),$("body").addClass("modal-open").append(o),$("body").find(".video-modal").attr("tabindex",0).focus(),video.initModal(),video.cache.id=a},initCompo:function(i,o,d,n){$(".video-asset").on({click:function(e){e.preventDefault();var t=$(e.delegateTarget),a=$(e.delegateTarget).parents(".video-box").find(".text-area");t.parents(".component").removeClass("js-invisible-nav"),$(i).data("cachedvideo",t.detach()),$(i).data("cacheid",o),$(i).data("cacheaccount",d),$(i).data("cacheplayer",n),a.removeAttr("style")}},".close-video"),$(".video-asset").on({click:function(e){e.preventDefault(),$(this).siblings(".close-video").click(),$(i).siblings(".video-content").click()}},".change-video"),$(".video-asset").on({click:function(e){e.preventDefault(),$(this).siblings(".close-video").click(),$(i).siblings(".acc-video-content").click()}},".acc-change-video")},initModal:function(){$(".video-modal").on({click:function(e){e.preventDefault();var t=$(e.delegateTarget);video.cache.$modal=t.detach(),$("body").removeClass("modal-open"),video.originalFocus.focus(),r&&clearInterval(r)}},".close-video"),$(".video-modal").on({click:function(e){e.preventDefault(),$(this).siblings(".close-video").click(),video.originalFocus.siblings(".video-content").click()}},".change-video"),$(".video-modal").on({click:function(e){e.preventDefault(),$(this).siblings(".close-video").click(),video.originalFocus.siblings(".acc-video-content").click()}},".acc-change-video")},init:function(){video.trigger.init()}}).init()});
//# sourceMappingURL=maps/video-asset.min.js.map
